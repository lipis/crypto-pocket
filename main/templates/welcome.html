# extends 'base.html'
# import 'macro/utils.html' as utils

# block header
  <div class="jumbotron">
    <div class="container text-center">
      <h1>{{config.CONFIG_DB.brand_name}}</h1>
      <p>Hello, crypto-world!</p>
    </div>
  </div>
# endblock

# block content
  # if current_user.id > 0
    <a class="btn btn-primary" href="{{url_for('transaction_update')}}">
      <fa class="fa fa-plus fa-fw"></fa> Add Transaction
    </a>
    <hr>
    <div class="table-responsive {{'hide' if not transaction_dbs|count}}">
      <table class="table table-striped table-bordered table-hover">
        <thead>
          <tr class="text-nowrap">
            <th class="col-xs-1 text-center">{{utils.order_by_link('date', _('Date'))}}</th>
            <th class="col-xs-1 text-center">{{utils.order_by_link('spent_amount', _('Spent'))}}</th>
            <th class="col-xs-1 text-center">{{utils.order_by_link('acquired_amount', _('Acquired'))}}</th>
            <th class="col-xs-1 text-center">{{utils.order_by_link('acquired_rate', _('Acquired Rate'))}}</th>
            <th class="col-xs-1 text-center">{{utils.order_by_link('current_rate', _('Current Rate'))}}</th>
            <th class="col-xs-1 text-center">{{utils.order_by_link('profit', _('Profit'))}}</th>
            <th class="col-xs-1 text-center">{{utils.order_by_link('total', _('Total'))}}</th>
          </tr>
        </thead>
        <tbody>
          # for transaction_db in transaction_dbs
            <tr class="row-link {{'text-success' if transaction_db.total > transaction_db.spent_amount else 'text-danger' if transaction_db.current_rate else 'text-muted'}}" id="{{transaction_db.key.urlsafe()}}" data-href="{{url_for('transaction_view', transaction_id=transaction_db.key.id())}}">
              <td class="text-center text-nowrap">{{transaction_db.date.strftime('%d %b %Y')}}</td>
              # set spent_currency = transaction_db.spent_currency_key.get().code
              <td class="text-right text-nowrap">
                <div>{{utils.currency(transaction_db.spent, spent_currency)}}</div>
                <small class="text-muted">{{utils.currency(transaction_db.fee, spent_currency)}}</small>
              </td>
              <td class="text-right text-nowrap">{{utils.currency(transaction_db.acquired, transaction_db.acquired_currency_key.get().code)}}</td>
              <td class="text-right text-nowrap">{{utils.currency(transaction_db.acquired_rate, spent_currency)}}</td>
              <td class="text-right text-nowrap">{{utils.currency(transaction_db.current_rate, spent_currency)}}</td>
              <td class="text-right text-nowrap">{{utils.currency(transaction_db.profit, spent_currency)}}</td>
              <td class="text-right text-nowrap">{{utils.currency(transaction_db.total, spent_currency)}}</td>
            </tr>
          # endfor
        </tbody>
      </table>
    </div>

    {{utils.next_link(next_url)}}
  # endif
# endblock
